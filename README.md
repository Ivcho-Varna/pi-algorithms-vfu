# Алгоритми за приближение на π в Elixir

Цялостна реализация и тестов пакет за три класически алгоритма, които приближават математическата константа π (пи) с помощта на Elixir. Всеки алгоритъм е реализиран както в рекурсивна, така и в итеративна форма.

## Общ преглед

Този проект изследва различни математически подходи за изчисляване на π, сравнявайки тяхната точност, скорост и изчислителни характеристики. Всички алгоритми са реализирани с използване на функционални програмни парадигми в Elixir.

## Реализирани алгоритми

### 1. Ред на Лайбниц
**Файл:** `leibniz.exs`

Приближава π чрез формулата на Leibniz (известна още като ред на Грегъри-Лайбниц):

```
π = 4 × (1 - 1/3 + 1/5 - 1/7 + 1/9 - ...)
```

**Реализации:**
- `PiLeibniz.leibniz_recursive/1` - Не-опашкова рекурсивна реализация
- `PiLeibniz.leibniz_iterative/1` - Опашкова рекурсивна (итеративна) реализация с акумулатор

### 2. Произведение на Уолис
**Файл:** `wallis.exs`

Приближава π чрез формулата на Wallis:

```
π/2 = (2/1) × (2/3) × (4/3) × (4/5) × (6/5) × (6/7) × ...
π = 2 × ∏[k=1 до n] (4k²) / (4k² - 1)
```

**Реализации:**
- `PiWallis.wallis_recursive/1` - Не-опашкова рекурсивна реализация
- `PiWallis.wallis_iterative/1` - Опашкова рекурсивна (итеративна) реализация с акумулатор

### 3. Ред на Ниляканта
**Файл:** `nilakantha.exs`

Приближава π чрез реда на Nilakantha:

```
π = 3 + 4/(2×3×4) - 4/(4×5×6) + 4/(6×7×8) - ...
π = 3 + ∑[k=1 до n] (-1)^(k+1) × 4 / ((2k)(2k+1)(2k+2))
```

**Реализации:**
- `PiNilakantha.nilakantha_recursive/1` - Не-опашкова рекурсивна реализация
- `PiNilakantha.nilakantha_iterative/1` - Опашкова рекурсивна (итеративна) реализация с акумулатор

## Структура на проекта

```
c:\projects\elixir\
├── README.md              # Този файл
├── leibniz.exs           # Реализация на реда на Лайбниц
├── wallis.exs            # Реализация на произведението на Уолис
├── nilakantha.exs        # Реализация на реда на Ниляканта
└── tests/
    ├── benchmark.exs     # Помощни функции за измерване
    ├── accuracy_test.exs # Тестове за сравнение на точност
    └── speed_test.exs    # Тестове за сравнение на скорост
```

## Изисквания

- **Elixir:** версия 1.12 или по-нова
- **Erlang/OTP:** версия 22 или по-нова

## Инсталация

1. Клонирайте или изтеглете това хранилище
2. Уверете се, че Elixir е инсталиран на системата ви
3. Навигирайте до директорията на проекта

```bash
cd c:\projects\elixir
```

## Употреба

### Изпълнение на отделни алгоритми

Можете да използвате всеки алгоритъм директно в Elixir скрипт или IEx:

```elixir
# Зареждане на модула
Code.require_file("leibniz.exs")

# Приближаване на π чрез Лайбниц с 10000 итерации
PiLeibniz.leibniz_iterative(10000)
# => 3.1414926535900345

# Зареждане и използване на Уолис
Code.require_file("wallis.exs")
PiWallis.wallis_iterative(10000)
# => 3.1414971639472924

# Зареждане и използване на Ниляканта
Code.require_file("nilakantha.exs")
PiNilakantha.nilakantha_iterative(10000)
# => 3.1415926035898384
```

### Изпълнение на тестове

#### Тест за точност
Определя минималния брой итерации, необходими на всеки алгоритъм, за да постигне определен толеранс от действителната стойност на π.

```bash
elixir tests\accuracy_test.exs
```

**Изходът включва:**
- Минимални необходими итерации
- Краен резултат
- Грешка от действителното π
- Статус на постигане

#### Тест за скорост
Измерва времето за изпълнение и точността на всеки алгоритъм с фиксиран брой итерации.

```bash
elixir tests\speed_test.exs
```

**Изходът включва:**
- Време за изпълнение в милисекунди
- Получено приближение
- Грешка от действителното π
- Дълбочина на рекурсията

## Помощни функции за измерване

Модулът `Benchmark` (в `tests/benchmark.exs`) предоставя три основни функции за измерване:

### `measure_accuracy/5`
Намира минималния брой итерации, необходими за постигане на целева точност, използвайки оптимизация с двоично търсене.

```elixir
Benchmark.measure_accuracy(PiLeibniz, :leibniz_iterative, :math.pi(), 0.001, 100_000)
```

**Параметри:**
- `module` - Модулът, съдържащ алгоритъма
- `function` - Името на функцията (атом)
- `target_value` - Целева стойност на π (обикновено `:math.pi()`)
- `tolerance` - Допустим марджин на грешка (по подразбиране: 0.001)
- `max_iterations` - Максимални итерации за тестване (по подразбиране: 100,000)

### `measure_speed/3`
Измерва общото време за изпълнение за определен брой итерации.

```elixir
Benchmark.measure_speed(PiWallis, :wallis_iterative, 10000)
```

### `measure_recursion_depth/1`
Отчита дълбочината на рекурсията за даден брой итерации.

```elixir
Benchmark.measure_recursion_depth(1000)
```

**Параметри:**
- `module` - Модулът, съдържащ алгоритъма
- `function` - Navnet на функцията (атом)
- `iterations` - Брой итерации за изпълнение

## Проведени тестове

### Тест за точност

```
=== КОМБИНИРАН ТЕСТ ЗА ТОЧНОСТ НА АЛГОРИТМИ ЗА ПРИБЛИЖЕНИЕ НА π ===

Тестване с точност (±0.1), max: 100000...
Тестване с точност (±0.01), max: 100000...
Тестване с точност (±0.001), max: 100000...
Тестване с точност (±0.0001), max: 100000...

╔═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                    ОБЕДИНЕНА ТАБЛИЦА С РЕЗУЛТАТИ ОТ ВСИЧКИ ТЕСТОВЕ                                              ║
╚═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

Целева стойност на π: 3.1415926536


══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
  Целева точност: ±0.1 | Max итерации: 100000
══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
Алгоритъм                      | Целева точност   | Итерации     | Резултат           | Грешка          | Статус
──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Leibniz (Рекурсивен)           | ±0.1             | 10           | 3.0418396189       | 0.0997530347    | ✓ Постигната
Leibniz (Итеративен)           | ±0.1             | 10           | 3.0418396189       | 0.0997530347    | ✓ Постигната
Wallis (Рекурсивен)            | ±0.1             | 8            | 3.0505899961       | 0.0910026575    | ✓ Постигната
Wallis (Итеративен)            | ±0.1             | 8            | 3.0505899961       | 0.0910026575    | ✓ Постигната
Nilakantha (Рекурсивен)        | ±0.1             | 1            | 3.1666666667       | 0.0250740131    | ✓ Постигната
Nilakantha (Итеративен)        | ±0.1             | 1            | 3.1666666667       | 0.0250740131    | ✓ Постигната

══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
  Целева точност: ±0.01 | Max итерации: 100000
══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
Алгоритъм                      | Целева точност   | Итерации     | Резултат           | Грешка          | Статус
──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Leibniz (Рекурсивен)           | ±0.01            | 100          | 3.1315929036       | 0.00999975      | ✓ Постигната
Leibniz (Итеративен)           | ±0.01            | 100          | 3.1315929036       | 0.00999975      | ✓ Постигната
Wallis (Рекурсивен)            | ±0.01            | 78           | 3.1316035636       | 0.00998909      | ✓ Постигната
Wallis (Итеративен)            | ±0.01            | 78           | 3.1316035636       | 0.00998909      | ✓ Постигната
Nilakantha (Рекурсивен)        | ±0.01            | 2            | 3.1333333333       | 0.0082593203    | ✓ Постигната
Nilakantha (Итеративен)        | ±0.01            | 2            | 3.1333333333       | 0.0082593203    | ✓ Постигната

══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
  Целева точност: ±0.001 | Max итерации: 100000
══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
Алгоритъм                      | Целева точност   | Итерации     | Резултат           | Грешка          | Статус
──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Leibniz (Рекурсивен)           | ±0.001           | 1000         | 3.1405926538       | 9.999998e-4     | ✓ Постигната
Leibniz (Итеративен)           | ±0.001           | 1000         | 3.1405926538       | 9.999997e-4     | ✓ Постигната
Wallis (Рекурсивен)            | ±0.001           | 785          | 3.1405929424       | 9.997112e-4     | ✓ Постигната
Wallis (Итеративен)            | ±0.001           | 785          | 3.1405929424       | 9.997112e-4     | ✓ Постигната
Nilakantha (Рекурсивен)        | ±0.001           | 6            | 3.1408813409       | 7.113127e-4     | ✓ Постигната
Nilakantha (Итеративен)        | ±0.001           | 6            | 3.1408813409       | 7.113127e-4     | ✓ Постигната

══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
  Целева точност: ±0.0001 | Max итерации: 100000
══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
Алгоритъм                      | Целева точност   | Итерации     | Резултат           | Грешка          | Статус
──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Leibniz (Рекурсивен)           | ±0.0001          | 10000        | 3.1414926536       | 0.0001          | ✓ Постигната
Leibniz (Итеративен)           | ±0.0001          | 10000        | 3.1414926536       | 0.0001          | ✓ Постигната
Wallis (Рекурсивен)            | ±0.0001          | 7854         | 3.1414926618       | 9.99918e-5      | ✓ Постигната
Wallis (Итеративен)            | ±0.0001          | 7854         | 3.1414926618       | 9.99918e-5      | ✓ Постигната
Nilakantha (Рекурсивен)        | ±0.0001          | 13           | 3.1416831892       | 9.05356e-5      | ✓ Постигната
Nilakantha (Итеративен)        | ±0.0001          | 13           | 3.1416831892       | 9.05356e-5      | ✓ Постигната

══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

╔═══ ОБОБЩЕНИЕ ═══╗

Точност ±0.0001 (max: 100000):
  └─ Успешни: 6/6
Точност ±0.001 (max: 100000):
  └─ Успешни: 6/6
Точност ±0.01 (max: 100000):
  └─ Успешни: 6/6
Точност ±0.1 (max: 100000):
  └─ Успешни: 6/6

```

# Тест за скорост

```
=== КОМБИНИРАН ТЕСТ ЗА СКОРОСТ НА АЛГОРИТМИ ЗА ПРИБЛИЖЕНИЕ НА π ===

Тестване с 1000 итерации...
Тестване с 10000 итерации...
Тестване с 100000 итерации...
Тестване с 1000000 итерации...

╔═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                    ОБЕДИНЕНА ТАБЛИЦА С РЕЗУЛТАТИ ОТ ВСИЧКИ ТЕСТОВЕ                                              ║
╚═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

Целева стойност на π: 3.1415926536


════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
  Брой итерации: 1000
════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
Алгоритъм                      | Итерации     | Време (ms)      | Резултат           | Грешка          | Дълбочина
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Leibniz (Рекурсивен)           | 1000         | 0.41            | 3.1405926538       | 9.999998e-4     | 1000
Leibniz (Итеративен)           | 1000         | 0.0             | 3.1405926538       | 9.999997e-4     | 1000
Wallis (Рекурсивен)            | 1000         | 0.0             | 3.140807746        | 7.849076e-4     | 1000
Wallis (Итеративен)            | 1000         | 0.0             | 3.140807746        | 7.849076e-4     | 1000
Nilakantha (Рекурсивен)        | 1000         | 0.1             | 3.1415926533       | 2.0e-10         | 1000
Nilakantha (Итеративен)        | 1000         | 0.0             | 3.1415926533       | 2.0e-10         | 1000

════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
  Брой итерации: 10000
════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
Алгоритъм                      | Итерации     | Време (ms)      | Резултат           | Грешка          | Дълбочина
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Leibniz (Рекурсивен)           | 10000        | 0.92            | 3.1414926536       | 0.0001          | 10000
Leibniz (Итеративен)           | 10000        | 0.1             | 3.1414926536       | 0.0001          | 10000
Wallis (Рекурсивен)            | 10000        | 1.02            | 3.1415141187       | 7.85349e-5      | 10000
Wallis (Итеративен)            | 10000        | 0.2             | 3.1415141187       | 7.85349e-5      | 10000
Nilakantha (Рекурсивен)        | 10000        | 1.84            | 3.1415926536       | 0.0             | 10000
Nilakantha (Итеративен)        | 10000        | 0.31            | 3.1415926536       | 0.0             | 10000

════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
  Брой итерации: 100000
════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
Алгоритъм                      | Итерации     | Време (ms)      | Резултат           | Грешка          | Дълбочина
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Leibniz (Рекурсивен)           | 100000       | 9.63            | 3.1415826536       | 1.0e-5          | 100000
Leibniz (Итеративен)           | 100000       | 1.64            | 3.1415826536       | 1.0e-5          | 100000
Wallis (Рекурсивен)            | 100000       | 22.73           | 3.1415847997       | 7.8539e-6       | 100000
Wallis (Итеративен)            | 100000       | 3.07            | 3.1415847997       | 7.8539e-6       | 100000
Nilakantha (Рекурсивен)        | 100000       | 53.04           | 3.1415926536       | 0.0             | 100000
Nilakantha (Итеративен)        | 100000       | 4.4             | 3.1415926536       | 0.0             | 100000

════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
  Брой итерации: 1000000
════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
Алгоритъм                      | Итерации     | Време (ms)      | Резултат           | Грешка          | Дълбочина
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Leibniz (Рекурсивен)           | 1000000      | 201.73          | 3.1415916536       | 1.0e-6          | 1000000
Leibniz (Итеративен)           | 1000000      | 29.39           | 3.1415916536       | 1.0e-6          | 1000000
Wallis (Рекурсивен)            | 1000000      | 1144.73         | 3.1415918682       | 7.854e-7        | 1000000
Wallis (Итеративен)            | 1000000      | 40.65           | 3.1415918682       | 7.854e-7        | 1000000
Nilakantha (Рекурсивен)        | 1000000      | 227.74          | 3.1415926536       | 0.0             | 1000000
Nilakantha (Итеративен)        | 1000000      | 48.64           | 3.1415926536       | 0.0             | 1000000

════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

╔═══ ОБОБЩЕНИЕ ═══╗

Брой итерации: 1000
  ├─ Средно време: 0.09 ms
  ├─ Най-бърз: Leibniz (Итеративен) (0.0 ms)
  └─ Най-бавен: Leibniz (Рекурсивен) (0.41 ms)

Брой итерации: 10000
  ├─ Средно време: 0.73 ms
  ├─ Най-бърз: Leibniz (Итеративен) (0.1 ms)
  └─ Най-бавен: Nilakantha (Рекурсивен) (1.84 ms)

Брой итерации: 100000
  ├─ Средно време: 15.75 ms
  ├─ Най-бърз: Leibniz (Итеративен) (1.64 ms)
  └─ Най-бавен: Nilakantha (Рекурсивен) (53.04 ms)

Брой итерации: 1000000
  ├─ Средно време: 282.15 ms
  ├─ Най-бърз: Leibniz (Итеративен) (29.39 ms)
  └─ Най-бавен: Wallis (Рекурсивен) (1144.73 ms)
```
Резултати от проведените тестове може да намерите в папката ```test_results```

## Справки

- [Формула на Лайбниц за Pi](https://en.wikipedia.org/wiki/Leibniz_formula_for_%CF%80)
- [Произведение на Уолис](https://en.wikipedia.org/wiki/Wallis_product)
- [Ред на Ниляканта](https://en.wikipedia.org/wiki/Pi#Efficient_methods)
- [Документация на Elixir](https://elixir-lang.org/docs.html)
